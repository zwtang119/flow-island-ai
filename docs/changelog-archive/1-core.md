
# 更新日志 (Changelog)

所有本项目的重大变更都将记录在此文件中。

## v0.24.0 - "健壮性升级" - 优化交互，延长时限
- **Feat(ux):** 录音交互模式从“按住说话”重构为更灵活的“单击切换”模式，并新增60秒自动停止机制，优化了长语音输入的体验。
- **Perf(core):** 将AI请求的超时时限从30秒延长至60秒，以更好地应对网络波动和复杂指令，显著提升系统健壮性。
- **Refactor(ui):** 更新了录音按钮的UI反馈文本，以匹配新的“单击切换”交互模式。
- **Benefit:** 本次升级为用户提供了更从容、更可靠的语音输入体验，并大幅降低了因超时导致的操作失败率，使系统在真实网络环境下更加健壮。

## v0.23.0 - "主动控制" - 实现Push-to-Talk，提升录音可靠性
- **Feat(ux):** 实现了真正的**“按住说话 (Push-to-Talk)”**功能，彻底解决了因语音停顿导致录音被意外中断的核心痛点。
- **Refactor(ui):**
    - **重构事件监听**: 将录音按钮的交互从`click`模式改为`mousedown`/`mouseup`和`touchstart`/`touchend`模式。
    - **优化UI反馈**: 按钮和状态文本现在能更精确地反映“正在聆听”和“松开处理”等状态。
- **Benefit:** 本次升级将录音的**开始与结束控制权100%交还给用户**，用一个简单、可靠的物理动作（按住/松开）取代了浏览器不可靠的静默检测算法。这极大地提升了语音输入的流畅度、可靠性和容错性，让用户体验变得更加自然和可控。

## v0.22.0 - "清晰至上" - 动态日期标签
- **Feat(ux):** 为“我的日程”列表引入了智能**“相对日期标签”**，彻底解决了日程时间归属的模糊性问题。
- **Refactor(ui):**
    - **新增 `getRelativeDateLabel`**: 这是一个纯粹的、无依赖的客户端辅助函数，能根据用户当前时间，动态计算并返回 `(今天)`、`(明天)` 或具体的 `(M月d日)` 标签。
    - **更新 `renderMyAgenda`**: 渲染逻辑现在会调用上述函数，将返回的日期标签清晰地展示在时间和摘要之间。
- **Benefit:** 本次更新是“一瞥即懂”设计哲学的又一次成功实践。它通过在正确的技术层面（客户端）解决问题，确保了用户看到的日程时间信息永远是**实时、准确、无歧义**的，极大地提升了系统的可用性和用户的信任感。

## v0.21.0 - "平衡之美" - 最终UI/UX定稿
- **Feat(ux):** 执行了最终的UI/UX重构，正式确立了**“三区式布局 (Three-Zone Layout)”**作为最终的、最可靠的“感知界面”实现方案。
- **Refactor(ui):**
    - **废弃“焦点透视”**: 彻底废弃了在可读性上存在缺陷的“焦点透视”布局。
    - **引入“三区式”布局**: 严格按照像素级规范，在屏幕上划分出**待办栏**、**焦点区**和**上下文区**，并通过分隔线建立了清晰的视觉边界。
    - **移除灰色字体**: 为了在墨水屏上达到最佳对比度，所有文本元素现在均使用**纯黑色**渲染。
- **Refactor(docs):**
    - **同步设计系统**: `DESIGN-UIUX-EINK.md`已完全重写，以详细记录“三区式”布局的像素级规范。
- **Benefit:** 本次重构是对“清晰至上”和“硬件原生”设计哲学的终极实践。它在200x200像素的墨水屏上，实现了信息层级的绝对清晰和最佳可读性，为产品的核心体验画上了完美的句号。

## v0.20.0 - "情景界面" - UI/UX哲学升华
- **Feat(ux):** 执行了决定性的UI/UX重构，将设计哲学从“阅读界面”升华为**“感知界面”**，引入了“焦点透视”布局，旨在创造“一眼即情景”的感知体验。
- **Feat(core):** 引入了**“待办”**作为一种特殊的、更人性化的时间类型，用于处理用户没有明确定义时间的日程。
- **Perf(core):** 将AI请求的超时时间从15秒大幅延长至**30秒**，以应对更复杂的指令和网络波动，提升系统健壮性。
- **Refactor(ai):** 升级AI Prompt契约，强制AI在无法解析出具体时间时，返回`"待办"`。
- **Refactor(docs):** `DESIGN-UIUX-EINK.md`和所有相关测试案例都已同步更新，以适配新的UI模型和数据契约。
- **Benefit:** 本次升华式的重构，标志着产品从一个“好用的工具”，向一个**“优雅的作品”**迈出了关键一步。

## v0.19.0 - "感知界面" - UI/UX哲学升华与实现
- **Feat(ux):** 执行了决定性的UI/UX重构，将设计哲学从“阅读界面”升华为**“感知界面”**。
- **Refactor(ui):**
    - **废弃“时间轴”**: 彻底废弃了在概念验证阶段被证明不切实际的“时间轴叙事”模型。
    - **引入“务实层级”**: 正式确立并实现了全新的**“务实层级：时间即标题”**布局。该设计通过将`时间`作为独立的视觉标题，在保持清晰主次关系的同时，**最大化**了`摘要`文本的可用显示宽度，从根本上解决了文本溢出和换行过多的问题，真正实现了“一瞥即懂”。
- **Refactor(ai):**
    - **升级AI契约**: 对AI Prompt进行了根本性升级，强制要求AI返回**独立的`time`和`summary`字段**，且对`summary`的长度和内容（动词+对象）进行了严格约束。
    - **数据解耦**: 本次升级实现了数据与表示的完全解耦，是新UI得以实现的核心技术前提。
- **Refactor(client):**
    - **重写渲染引擎**: 彻底重写了`renderImageOnCanvas`函数，以100%像素级精准地实现“务实层级”布局。
    - **同步数据结构**: Web UI中的所有数据处理和显示逻辑（如“我的日程”列表、“功能演示”模块）都已同步更新，以完全适配新的AI数据契约。
- **Refactor(docs):**
    - **同步设计系统**: `DESIGN-UIUX-EINK.md`已完全重写，以反映全新的“务实层级”模型。
    - **同步测试案例**: `TEST-CASES-QUADRANT-CLASSIFICATION.md`中的全部60个测试案例，其期望输出都已更新为新的JSON格式。
- **Benefit:** 本次升华式的重构，不仅解决了之前版本的所有UI/UX缺陷，更让产品的核心体验达到了前所未有的**纯粹、专注和“無感”**，完美践行了`MANIFESTO.md`的最高设计哲学。

## v0.18.1 - "兼容性之盾" - 修复PNG编码，确保硬件显示完整
- **Fix(rendering):** 修复了Watchy设备上图像显示被截断的核心问题。
- **Refactor(server):** 在`server.js`的`sharp`处理管线中，为`.png()`编码器增加了`{ palette: false }`选项。此项改动强制`sharp`生成兼容性更强的24位RGB PNG，而不是Watchy固件中`PNGdec`库无法完整解析的、经过优化的索引色PNG，从而确保了图像能够在硬件上被完整、正确地渲染。
- **Benefit:** 此修复极大提升了系统的**物理世界可靠性**，确保了从Web预览到硬件显示的端到端视觉保真度。

## v0.18.0 - "单一真理之源" - 统一渲染管线
- **Refactor(core):** 执行了决定性的架构统一重构，彻底移除了所有服务器端渲染逻辑 (`server-rendering.js`, `generate-previews.js`, `preview-data.js`)，确立客户端Canvas为**唯一的渲染引擎**。
- **Refactor(client):** “功能演示”页面的静态`<img>`预览图被替换为动态`<canvas>`，现在它与“配置中心”的实时预览，共享**完全相同**的渲染函数 (`renderImageOnCanvas`)，确保了视觉上的**绝对一致**。
- **Refactor(server):** 进一步简化服务器，移除了为静态预览图服务的`/assets`目录和相关的`postinstall`脚本。
- **Benefit:** 本次重构终结了系统“双重人格”的渲染模式，极大降低了维护成本，并从根本上解决了因两套渲染引擎不一致而导致的文本溢出、字体模糊等一系列问题，使系统变得前所未有的**简单、务实、可靠**。

## v0.17.0 - "奥德赛引擎" - 回归客户端渲染，追求极致可靠
- **Refactor(core):** 执行了决定性的架构重构，从**服务器端渲染**回归到**客户端渲染**，以对齐“AI便利贴”项目中被验证的更简单、更可靠的模型。
- **Refactor(client):** Web UI (`index.html`) 现在是系统的**“渲染中心”**，负责调用AI、更新UI、**使用Canvas渲染PNG**并上传至服务器。
- **Refactor(server):** 服务器 (`server.js`) 被极大简化，回归**“图像缓存代理”**的单一职责，移除了所有AI依赖和渲染逻辑。
- **Benefit:** 极大提升了系统的**可靠性**、**性能**和**可维护性**，并实现了真正的**“所见即所得”**。

## v0.16.0 - 回归本源，重构Web UI，聚焦可靠反馈
- **Refactor(ui):** 对Web UI进行了决定性的简化重构，废弃了不可靠的“实时图像预览”，将**“我的日程”**文本列表提升为用户操作的**唯一、可靠的反馈来源**。
- **Feat(api):** 新增`GET /api/display-state`权威端点，确保“我的日程”能同时反映日历和语音备忘录的最新状态。

## v0.15.0 - 重构Web UI，分离“配置”与“演示”
- **Feat(ux):** 对Web UI进行了里程碑式的重构，引入了**“配置中心”**和**“功能演示”**两个核心标签页，彻底分离了用户操作界面与产品功能展示。

## v0.14.0 - 重构预览机制，实现100%“所见即所得”
- **Feat(dev):** 新增独立的`generate-previews.js`脚本，为三位用户画像预先生成100%像素级精准的静态PNG预览图。
- **Refactor(ui):** **根本性重构**了预览机制，彻底移除了前端所有复杂的SVG动态渲染逻辑，替换为一个简单的`<img>`标签，通过用“预计算”代替“实时模拟”的策略，确保了预览体验的绝对可靠性。

## v0.13.2 - 放宽AI摘要长度，增加信息密度
- **Spec(ai):** 将`summary`字段的长度限制从“不超过25个汉字”放宽至“不超过50个汉字”，让用户能获取更丰富、更具行动价值的信息。

## v0.13.1 - 精炼AI摘要，提升信息增量
- **Perf(ux):** 对AI Prompt进行了关键性优化，禁止AI在摘要中包含“紧急”、“重要”等冗余词汇，提升了屏幕内容的“信息增量”。

## v0.13.0 - 上线“清晨的规划师”MVP - 智能排序引擎
- **Feat(server):** 正式实现“智能排序”MVP显示逻辑。服务器现在会利用AI的四象限分类结果，找出最重要的两个事件（Q1/Q2）并用于更新屏幕，标志着项目从“信息呈现”迈向“智能决策”的关键一步。

## v0.12.0 - 聚焦MVP，重构产品路线图
- **Spec(scope):** 对“智能教练”功能的产品路线图进行了重大重构，**明确将“时间感知模式”移出当前MVP范围**，将核心目标精简为实现一个**全天候适用**的“智能排序”引擎。

## v0.11.0 - 引入“时间感知AI教练”概念
- **Feat(ai):** 正式引入“时间感知AI教练”核心概念，将时间管理四象限理论与一天中的三个核心时段相结合。

## v0.10.0 - “清晰至上”设计系统重构
- **Feat(design):** 正式确立并实施了《心流静岛设计系统》，将“清晰至上”、“结构引导”和“硬件原生”作为核心设计哲学，为项目奠定了统一、专业且高度一致的视觉与交互基础。

## v-0.9.0 - “七个习惯”理念原型化
- **Feat(ux):** 在Web UI中为“智能优先级引擎”功能开发了前端原型，将《高效能人士的七个习惯》中的核心理念进行了可视化。

## v-0.8.0 - 重构屏幕布局，最大化信息可读性
- **Refactor(server):** 彻底重构了屏幕显示布局，将核心任务区域的字体大小提升近50%，并支持自动换行，从根本上解决了信息可读性问题。

## v-0.7.0 - 引入“专注+上下文”布局，提升可读性
- **Feat(ux):** 引入了全新的“专注+上下文”(Focus + Context)显示布局，通过建立主次信息的视觉层级，极大地提升了内容的可读性和信息密度。

## v-0.6.0 - 新增AI预览场景，实现可视化评审
- **Feat(ui):** 在Web UI中新增了“AI PREVIEW SCENARIOS”交互区域，使得对Prompt工程的视觉评审和迭代变得极为高效直观。

## v-0.5.0 - 重构AI Prompt，提升摘要质量
- **Feat(ai):** 对 `ai-prompt.txt` 进行了重大重构和强化，通过明确角色、制定规则、丰富示例，极大提升了AI生成日程摘要的质量、准确性和稳定性。

## v-0.4.0 - 实现实时时钟，修复屏幕时间冻结问题
- **Feat(core):** 重构了整个图像生成架构，采用“服务器端渲染”，彻底解决了当没有新信息时，Watchy屏幕上的时间会“冻结”的严重UX问题。

## v-0.3.0 - 实现日历同步后端
- **Feat(calendar):** 在服务器端实现了完整的日历同步逻辑，能够轮询日历、调用AI生成摘要并生成PNG图像。

## v-0.2.0 - 品牌统一与文档重构
- **Feat(brand):** 项目正式定名为“心流静岛 (Flow Island)”。
- **Doc(structure):** 创建 `MANIFESTO.md` 作为项目宣言，阐述核心设计哲学。

## v-0.1.0 - 项目启动与理念阐述
- **Feat(docs):** 确立项目核心理念与设计哲学，创建 `MANIFESTO.md`。
- **Chore(docs):** 初始化 `metadata.json` 的应用名称和描述。